<!DOCTYPE html>
<html lang="en" manifest="cache.manifest">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>स्वरः-paint</title>
  <link rel="stylesheet" href="letterpaint.css">
</head>

<body>
  <div class="container intro" id="container">

    <p class="toppanel">स्वरः-paint</p>

    <div class="gamedata" id="chars">
      अआइईउऊऋएऐओऔअंअःकखगघङचछजझञटठडढणतथदधनपफबभमयरलवशषसह
    </div>

    <canvas></canvas>

    <div class="cover" id="intro">
      <p>
        Paint over the letter you see on the screen. Can you write it without going outside of it?
        <button class="actionbutton" type="button">➜</button>
      </p>
    </div>

    <div class="cover check" id="win">
      <p>
        Great! +10 points
        <button class="actionbutton" type="button">➜</button>
      </p>
    </div>

    <div class="cover" id="error">
      <p>
        Oops! You went outside.
        <button class="actionbutton" type="button">➜</button>
      </p>
    </div>

    <button class="navbutton" id="sound" type="button">♫</button>
    <button class="actionbutton undo" id="reload" type="button">X</button>

    <audio id="winsound" preload="auto">
      <source src="win.ogg" type="audio/ogg">
    </audio>
    <audio id="errorsound" preload="auto"></audio>

  </div>

  <!-- ✅ Leaderboard: prompt for name at start -->
  <script type="module">
    import { bp26Init, reportScore, bp26PromptName } from "../bp26/js/bp26-score.js";
    window.reportScore = reportScore;
    bp26PromptName({ force: true });
    bp26Init({ game: "026-sp" });
  </script>

  <!-- ✅ Leaderboard bridge -->
  <script type="module">
    import { submitScore } from "../score-submit.js";

    const GAME_ID = "026-sp";
    const POINTS_PER_WIN = 10;

    function ensureName() {
      let name = (localStorage.getItem("zatam_username") || "").trim();
      if (!name) {
        name = (localStorage.getItem("bp26_username") || "").trim();
      }
      if (!name) {
        name = "Guest";
      }
      return name;
    }

    window.zatamLB26 = {
      ensureName,
      awardWin: async () => {
        const name = ensureName();
        if (window.reportScore) {
          await window.reportScore(POINTS_PER_WIN);
        }
        console.log("✅ 026-sp submitted:", name, POINTS_PER_WIN);
      }
    };

    ensureName();
  </script>

  <script src="letterpaint.js"></script>
</body>
</html>
